---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";
import Navbar from "../components/Navbar.astro";
---

<!DOCTYPE html>
<html lang="en" class="dark font-[Anybody]">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      @keyframes move-twink-back {
        from {
          background-position: 0 0;
        }
        to {
          background-position: -10000px 5000px;
        }
      }
      .dark .stars,
      .dar .twinkling {
        @apply absolute w-full h-full;
      }

      .dark .stars {
        background: #000 url("/stars.png") repeat top center;
        z-index: -10;
      }

      .dark .twinkling {
        background: transparent url("/twinkling.png") repeat top center;
        z-index: -5;
        animation: move-twink-back 200s linear infinite;
      }
    </style>
  </head>
  <body class="dark:bg-black transition-colors">
    <div id="page-container" class="min-h-screen relative">
      <div class="stars"></div>
      <div class="twinkling"></div>
      <Navbar />
      <main class="p-3 md:pb-20 pb-40 dark:text-white text-black">
        <slot />
      </main>
      <Footer />
    </div>
    <script>
      const getTheme = () => {
        const userTheme = localStorage.getItem("theme");
        const systemTheme = window.matchMedia("(prefers-color-scheme: dark)")
          .matches
          ? "dark"
          : "light";
        return userTheme || systemTheme;
      };

      if (getTheme() === "dark") {
        document.documentElement.classList.add("dark");
        document.documentElement.classList.remove("light");
      } else {
        document.documentElement.classList.remove("dark");
        document.documentElement.classList.add("light");
      }
    </script>
  </body><!-- <script type="module">
  import { setTheme } from "../scripts/dark";
  setTheme();
</script> -->
</html>
